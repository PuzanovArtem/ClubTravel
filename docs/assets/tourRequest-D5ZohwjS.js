import{h as d}from"./header-DXygQjIQ.js";import{i as u,C as s,a as m}from"./dropdown-BcidGZfk.js";import{t as h,p as f}from"./validator-kAhhofT2.js";import{m as p}from"./manage-selects-CTHsAexo.js";import{s as D}from"./select-C5RCZxkW.js";import{A as v}from"./air-datepicker-DcG5V9Ol.js";import"./_commonjsHelpers-Cpj98o6Y.js";class _{constructor(){this.food=document.querySelector(".food"),this.foodMain=document.querySelector(".food__list"),this.allLi=this.food.querySelectorAll("li"),this.currentSelect=document.querySelector(".food__btn-info"),this.errorFood=document.querySelector(".form__error-food"),this.init()}init(){this.setupSelect(),this.setupOpen(),this.setupObserver()}setupSelect(){this.allLi.forEach(t=>{t.addEventListener("click",()=>{this.currentSelect.textContent=t.textContent,this.errorFood.classList.remove("form__error-food_active"),document.dispatchEvent(new Event("selectFood"))})})}setupOpen(){this.food.addEventListener("click",()=>{this.food.classList.toggle("food_active")}),document.addEventListener("click",t=>{this.food.contains(t.target)||this.food.classList.remove("food_active")})}setupObserver(){const t=this.foodMain.offsetHeight,n=o=>{o.forEach(a=>{window.innerHeight>700&&a.boundingClientRect.top>0&&(a.isIntersecting?(this.food.classList.add("food_bottom"),this.food.classList.remove("food_top")):(this.food.classList.add("food_top"),this.food.classList.remove("food_bottom")))})},e=new IntersectionObserver(n,{root:null,rootMargin:`0px 0px -${t+30}px 0px`,threshold:1});document.querySelectorAll(".food__btn").forEach(o=>{e.observe(o)})}}function E(){const r=document.querySelectorAll(".form__stars-one-star");r.forEach(t=>{t.addEventListener("click",()=>{const n=Number(t.getAttribute("data-num"));y(r,n);const e=new CustomEvent("selectStars",{detail:{stars:t.getAttribute("data-num")}});document.dispatchEvent(e)})})}function y(r,t){r.forEach((n,e)=>{n.classList.toggle("form__stars-one-star_active",e<t)})}function S(){const r=document.querySelectorAll(".form__tab"),t=document.querySelectorAll(".form__state");function n(){r.forEach(e=>e.classList.remove("active")),t.forEach(e=>e.classList.remove("active"))}r.forEach((e,o)=>{e.addEventListener("click",()=>{n(),e.classList.add("active"),t[o].classList.add("active")})})}function g(r,t){t.addEventListener("click",function(){r.classList.toggle("drop-country_active")}),document.addEventListener("click",function(n){!r.contains(n.target)&&!t.contains(n.target)&&r.classList.remove("drop-country_active")})}function L(r,t,n,e){r.forEach(function(o){const a=o.querySelector(".accordion__btn"),c=o.querySelectorAll("li"),i=o.querySelector(".accordion__country").textContent;a.addEventListener("click",function(){o.classList.toggle("accordion_active")}),c.forEach(function(l){l.addEventListener("click",function(){t.textContent=i,n.textContent=l.textContent,e.classList.remove("drop-country_active"),document.dispatchEvent(new Event("selectTour"))})})})}function C(){const r=document.querySelector(".drop-country"),t=document.querySelector(".drop-country__county"),n=document.querySelector(".drop-country__tour"),e=document.querySelector(".drop-country__btn"),o=document.querySelectorAll(".accordion");g(r,e),L(o,t,n,r)}class w{constructor(){this.calendar=document.querySelector(".calendar"),this.calendarBtn=document.querySelector(".calendar__btn"),this.calendarMain=document.querySelector(".calendar__main"),this.startDateElem=document.getElementById("start-date"),this.finalDateElem=document.getElementById("final-date"),this.currentSelDate=new Date,this.currentNextDate=new Date,this.datepicker=void 0,this.counterValueElem=document.querySelector(".form__counter-value"),this.init()}init(){this.open(),this.airDatepicker(),this.initCounter()}newDate(t=!0,n=!1){t?(this.startDateElem.textContent=this.formatDate(this.currentSelDate),document.dispatchEvent(new Event("startDate"))):this.startDateElem.textContent="Выберите дату",n?(this.finalDateElem.textContent=this.formatDate(this.currentNextDate),document.dispatchEvent(new Event("finalDate"))):this.finalDateElem.textContent="Выберите дату",this.updateCounter()}airDatepicker(){const t=this,n=new Date().setFullYear(new Date().getFullYear()+5);this.datepicker=new v("#el",{range:!0,toggleSelected:!0,multipleDatesSeparator:" - ",minDate:new Date,onSelect({date:e}){var a,c,i;const o=e;o[1]?(t.currentNextDate=new Date(o[1]),t.newDate(!0,!0),(a=t.datepicker)==null||a.update({minDate:new Date,maxDate:n}),t.calendar.classList.remove("calendar_active")):o[0]?(t.currentSelDate=new Date(o[0]),t.newDate(),(c=t.datepicker)==null||c.update({minDate:new Date(o[0]),maxDate:new Date(o[0]).setDate(o[0].getDate()+18)})):((i=t.datepicker)==null||i.update({minDate:new Date,maxDate:n}),t.newDate(!1,!1))}})}updateCounter(){const t=Math.floor((this.currentNextDate-this.currentSelDate)/864e5);this.counterValueElem.textContent=t>0?t:0}initCounter(){const t=document.querySelector(".form__counter-increment"),n=document.querySelector(".form__counter-decrement");t.addEventListener("click",()=>{let e=+this.counterValueElem.textContent;e<18&&(e++,this.counterValueElem.textContent=e,this.updateFinishDate(e))}),n.addEventListener("click",()=>{let e=+this.counterValueElem.textContent;e>1&&(e--,this.counterValueElem.textContent=e,this.updateFinishDate(e))})}updateFinishDate(t){var e,o,a;const n=new Date(this.currentSelDate);n.setDate(this.currentSelDate.getDate()+t),(e=this.datepicker)==null||e.clear(),(o=this.datepicker)==null||o.selectDate(this.currentSelDate),(a=this.datepicker)==null||a.selectDate(n)}formatDate(t){const n=t.getDate(),e=t.getMonth()+1,o=t.getFullYear(),a=n<10?"0"+n:n,c=e<10?"0"+e:e;return`${a}.${c}.${o}`}open(){this.calendarBtn.addEventListener("click",()=>{this.calendar.classList.toggle("calendar_active")}),document.addEventListener("click",t=>{!this.calendar.contains(t.target)&&!this.calendarBtn.contains(t.target)&&this.calendar.classList.remove("calendar_active")})}}document.addEventListener("DOMContentLoaded",()=>{d(),C(),p(),u(),D(),S(),E(),h(),f(),new w,new _,new s({selector:"#counter-10",initCount:0,step:1}),new s({selector:"#counter-3",initCount:0,step:1,displaySelector:"#adults-display-form"});for(let r=4;r<=9;r++)new s({selector:`#counter-${r}`,initCount:0,step:1,displaySelector:"#kids-display-form",onUpdate:m,dataCounterType:"child"})});
